---
const { items } = Astro.props;
---

<div class="card-masonry">
    {items.map((item: any) => (
        <div class="card">
            <a href={item.link}>
                <img src={item.image} />
                <div class="visible-overlay">
                    <h3>{item.visible?.title}</h3>
                </div>

                <div class="overlay">
                    <h3>{item.on_hover?.title}</h3>
                    <p class="details">{item.on_hover?.subtitle}</p>
                </div>
            </a>
        </div>
    ))}
</div>

<style>
    .card-masonry{
		column-count: 1;
        column-gap: 0.5rem;
        max-width: 100%
	}
    @media (min-width: 1024px) {
        .card-masonry {
            column-count: 3;
        }
    }
    @media (min-width: 601px) and (max-width: 1023px) {
        .card-masonry {
            column-count: 2;
        }
    }
	.card {
		break-inside: avoid;
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 0.5rem;
  	}
    .overlay {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;

        background-color: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(0px);

        opacity: 0;
        transition: opacity 0.4s ease, backdrop-filter 0.4s ease;
    }

    .card:hover .overlay {
        opacity: 1;
        backdrop-filter: blur(8px); /* frosted glass look */
    }

    .overlay h3 {
        color: var(--gray-x-light);
        margin: 0 1rem;
    }
    
    .details {
        color: var(--gray-x-light);
        margin: 0 1rem;
        white-space: pre-wrap;
    }

    .visible-overlay {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: end;
        text-align: center;

        opacity: 1;
        transition: opacity 0.4s ease, backdrop-filter 0.4s ease;
    }

    .card:hover .visible-overlay {
        opacity: 0;
    }

    .visible-overlay h3 {
        color: var(--gray-x-light);
        -webkit-text-stroke: 0.1px var(--gray-dark);
        margin: 0 1rem;
    }

</style>